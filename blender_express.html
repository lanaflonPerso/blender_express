<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script src="common/b4w.min.js"></script>
<script>

var m = {
  app: b4w.require("app"),
  data: b4w.require("data"),
  scenes: b4w.require("scenes"),
  anim: b4w.require("animation"),
}


m.app.init({
    canvas_container_id: "viewer",
    callback: function() {
        m.data.load("scene/blender_express.json", function() {
            m.app.enable_controls();
            m.app.enable_camera_controls();
            document.getElementById("controlPanel").style.display = "block";
        })
    }
})

function toggleMovement() {
  var train_armature = m.scenes.get_object_by_name("train.armature");

  if(m.anim.is_play(train_armature)) {
    m.anim.stop(train_armature);
  } else {
    m.anim.play(train_armature);
  }
}

function changeSpeed(offset) {
  var train_armature = m.scenes.get_object_by_name("train.armature");
  m.anim.set_speed(train_armature,m.anim.get_speed(train_armature) + offset);
}

</script>
</head>

<body>
  <div id="viewer" style="width: 800px; height: 500px;"></div>
  <div id="controlPanel" style="display:none">
    <button onclick="toggleMovement()">start/stop</button>
    <button onclick="changeSpeed(-.1)">slowdown</button>
    <button onclick="changeSpeed(.1)">speedup</button>
  <div>
</body>
